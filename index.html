<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Galerie Nomad — Boutique</title>
<style>
  /* Variables de couleur et styles de base */
  :root {
    --bg: #f8f8f8; /* gris clair */
    --card-bg: #ffffff;
    --muted: #666;
    --accent: #0b3b45;
    --wa-green: #25D366;
    --primary-color: #222;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: "Helvetica Neue", Arial, sans-serif;
    background:var(--bg);
    color:#222;
    -webkit-font-smoothing:antialiased;
  }

  /* Bannière de livraison gratuite */
  #shipping-banner {
      background-color: var(--primary-color);
      color: white;
      text-align: center;
      padding: 5px;
      font-size: 0.7em;
      font-weight: bold;
  }

  /* En-tête */
  header {
    position: relative;
    padding: 16px;
    border-bottom: none;
  }
  .header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1100px;
    margin: 0 auto;
  }
  .logo-container {
      flex: 1;
      text-align: center;
  }
  header img{
    height:86px;
    object-fit:contain;
    border: none; /* S'assurer qu'il n'y a pas de bordure par défaut */
  }
  header nav{
    text-align:center;
    padding:10px 0;
  }

  /* Menu de navigation */
  nav[aria-label="menu"] {
    display: flex;
    justify-content: center;
    gap: 20px;
    font-weight: bold;
  }
  nav[aria-label="menu"] a {
      text-decoration: none;
      color: var(--primary-color);
  }

  /* Styles mobiles pour le menu hamburger */
  #menu-toggle {
    position: fixed;
    top: 37px;
    left: 20px;
    width: 20px;
    height: 20px;
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    cursor: pointer;
    z-index: 1002;
    background: none;
  }
  .menu-bar {
    width: 110%;
    height: 2px;
    background-color: #222;
    border-radius: 2px;
    transition: all 0.3s ease-in-out;
  }
  @media(max-width: 760px) {
    nav[aria-label="menu"] {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: white;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 20px;
      z-index: 998;
    }
    nav[aria-label="menu"].active {
      display: flex;
    }
  }

  /* Icône panier, compteur et recherche */
  .cart-icon, .search-icon {
    position: fixed;
    top: 23px;
    z-index: 1001;
    color: var(--primary-color);
    background: none;
    padding: 10px 15px;
    border-radius: 30px;
    cursor: pointer;
    border: none;
  }
  .search-icon {
    right: 50px;
  }
  .cart-icon {
    right: 10px;
  }
  .cart-icon svg {
    width: 23px;
    height: 23px;
  }
  .cart-count {
    position: absolute;
    top: 2px;
    right: 2px;
    background: red;
    color: white;
    font-size: 12px;
    font-weight: bold;
    padding: 2px 6px;
    border-radius: 50%;
    z-index: 1002;
  }

  /* Préchargeur */
  #preloader {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    opacity: 1;
    visibility: visible;
    transition: opacity 0.5s ease, visibility 0.5s ease;
  }
  #preloader.hidden {
    opacity: 0;
    visibility: hidden;
  }
  .preloader-logo {
    width: 90px;
    animation: fadeIn 1s ease-in-out;
    border: none; /* S'assurer qu'il n'y a pas de bordure par défaut */
  }
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Bannière de promotion */
  #promo-banner {
    background-color: red;
    color: white;
    text-align: center;
    padding: 8px;
    font-size: 1em;
    font-weight: bold;
    margin-top: 40px;
  }
  #countdown {
    margin-left: 10px;
    font-family: monospace;
  }

  /* Panneau panier */
  #cart-panel {
    position: fixed;
    top: 0;
    right: -350px;
    width: 300px;
    height: 100%;
    background: #f8f8f8;
    box-shadow: -2px 0px 5px rgba(0,0,0,0.2);
    padding: 20px;
    transition: 0.3s;
    z-index: 2000;
  }
  #cart-panel.open {
    right: 0;
  }
  #cart-panel h2 {
    margin-top: 0;
  }
  #cart-items {
    list-style: none;
    padding: 0;
  }
  #cart-items li {
    margin-bottom: 10px;
    border-bottom: 1px solid #ddd;
    padding-bottom: 5px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  #checkout-btn {
    background: var(--wa-green);
    color: white;
    padding: 10px;
    border: none;
    cursor: pointer;
    width: 100%;
    font-size: 16px;
  }
  .remove-btn {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 16px;
  }
  .cart-item-controls {
      display: flex;
      gap: 5px;
      align-items: center;
  }
  .cart-item-controls button {
      background: #f0f0f0;
      border: 1px solid #ccc;
      border-radius: 4px;
      width: 24px;
      height: 24px;
      cursor: pointer;
  }

  /* Champ de recherche avec suggestions */
  #search-container {
    position: fixed;
    top: 70px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    opacity: 0;
    z-index: 997;
    transition: width 0.3s ease-in-out, opacity 0.3s ease-in-out;
    display: flex;
    align-items: center;
    border-bottom: 2px solid var(--primary-color);
    background: white;
    padding: 5px;
  }
  #search-container.visible {
    width: 80%;
    opacity: 1;
  }
  #search-input {
    border: none;
    background: transparent;
    flex-grow: 1;
    font-size: 16px;
  }
  #search-input:focus {
    outline: none;
  }
  #search-back-button {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 24px;
    line-height: 1;
    padding: 0 5px;
    color: red;
    display: none;
  }
  #search-suggestions {
    position: fixed;
    top: 110px;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    background-color: white;
    border: 1px solid #ddd;
    border-top: none;
    max-height: 200px;
    overflow-y: auto;
    z-index: 997;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    display: none;
  }
  #search-suggestions.visible {
    display: block;
  }
  .suggestion-item {
    padding: 10px;
    cursor: pointer;
    border-bottom: 1px solid #eee;
  }
  .suggestion-item:last-child {
    border-bottom: none;
  }
  .suggestion-item:hover {
    background-color: #f5f5f5;
  }

  /* Styles pour le bouton de retour sous le produit */
  .product-return-button-container {
    text-align: center;
    margin-top: 20px;
    display: none;
  }
  .product-return-button-container.visible {
    display: block;
  }
  #product-return-button {
    background-color: #ff3333;
    color: white;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.2s ease;
  }
  #product-return-button:hover {
    background-color: #cc0000;
  }

  /* Sections de contenu */
  main{ max-width:1100px; margin:24px auto; padding:0 16px; }
  .tagline{
    text-align:center;
    color:var(--muted);
    margin:12px 0 0;
    font-size:0.95rem;
  }
  .hero-img {
      text-align: center;
  }
  .hero-img img {
      width: 100%;
      max-width: 800px;
      height: auto;
      object-fit: cover;
      border: none; /* S'assurer qu'il n'y a pas de bordure par défaut */
  }

  /* Styles pour les collections avec slider */
  .collection {
    position: relative;
    margin-bottom: 40px;
  }
  .collection h2 {
    text-align: center;
    margin-bottom: 15px;
    position: relative;
    padding-right: 25px; /* Espace pour la flèche */
  }

  /* Ajoute une flèche à droite du titre de la collection pour indiquer le défilement */
  .collection h2::after {
      content: "›";
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.5rem;
      color: var(--muted);
      transition: transform 0.3s ease;
  }

  /* Animation de la flèche sur le survol */
  .collection:hover h2::after {
      transform: translateY(-50%) translateX(5px);
  }

  .collection-slider {
    display: flex;
    overflow-x: auto;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    gap: 20px;
    padding: 10px;
  }
  /* Masquer la barre de défilement pour les navigateurs basés sur WebKit */
  .collection-slider::-webkit-scrollbar {
    display: none;
  }
  .collection-slider {
    -ms-overflow-style: none;  /* Masquer la barre de défilement pour IE et Edge */
    scrollbar-width: none;  /* Masquer la barre de défilement pour Firefox */
  }
  .product {
    min-width: 300px;
    background:var(--card-bg);
    border-radius:10px;
    padding:14px;
    box-shadow:0 8px 30px rgba(10,10,10,0.04);
    transition:transform .18s ease, box-shadow .18s ease;
    text-align:center;
    position: relative;
  }
  .product:hover{
    transform:translateY(-6px);
    box-shadow:0 18px 40px rgba(10,10,10,0.06);
  }

  /* Conteneur d'image pour maintenir l'aspect ratio */
  .product-media {
    position: relative;
    display: block;
    width: 100%;
    padding-bottom: 100%; /* Définit la hauteur égale à la largeur pour un aspect 1:1 */
    overflow: hidden;
  }
  .product-media img, .product-image-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain; /* Redimensionne l'image pour qu'elle s'insère dans le conteneur sans être déformée */
    border-radius: 8px;
    transition: transform .28s ease;
    border: none; /* S'assurer qu'il n'y a pas de bordure par défaut */
  }
  .product-media img:hover { transform:scale(1.03); }

  /* Styles pour la flèche incitant au slider */
  .slide-indicator {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.5em;
      color: var(--muted);
      opacity: 0;
      transition: opacity 0.3s ease, transform 0.3s ease;
      pointer-events: none;
  }
  .slide-indicator.right {
      right: 15px;
  }
  .slide-indicator.left {
      left: 15px;
  }

  /* Afficher et animer la flèche si le contenu est défilable */
  .collection.has-more-right .slide-indicator.right {
      opacity: 1;
      animation: slide-right 1s infinite alternate;
  }
  .collection.has-more-left .slide-indicator.left {
      opacity: 1;
      animation: slide-left 1s infinite alternate;
  }
  
  /* Animations pour les flèches */
  @keyframes slide-right {
      0% { transform: translateY(-50%) translateX(0); }
      100% { transform: translateY(-50%) translateX(5px); }
  }
  @keyframes slide-left {
      0% { transform: translateY(-50%) translateX(0); }
      100% { transform: translateY(-50%) translateX(-5px); }
  }

  .title{
    margin:12px 0 6px;
    font-weight:700;
    font-size:1.04rem;
    color:#111;
  }
  .desc{ margin:0; color:var(--muted); font-size:0.92rem; line-height:1.2; }
  .material{ margin:6px 0 8px; color:#777; font-size:0.88rem; font-style:italic; }
  .price{ font-weight:800; margin:8px 0; color:#111; }
  .actions{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:12px;
    margin-top:10px;
  }
  .heart{
    font-size:20px;
    line-height:1;
    cursor:pointer;
    color:#b0b0b0;
    transition: color .18s ease, transform .12s ease;
    user-select:none;
    border:none;
    background:transparent;
  }
  .heart.liked{ color:#e02b4a; transform:scale(1.08); }
  .add-to-cart-btn{
    color:var(--wa-green);
    font-weight:700;
    text-decoration:none;
    border:1px solid transparent;
    padding:8px 12px;
    border-radius:6px;
    transition:background .12s ease, color .12s ease, transform .12s ease;
    background:transparent;
    cursor: pointer;
  }
  .add-to-cart-btn:hover{
    background: rgba(37,211,102,0.08);
    transform:translateY(-2px);
  }
  .slider-controls {
    text-align: center;
    margin-top: 15px;
  }
  .slider-controls button {
    display: none;
  }

  /* --- STYLES POUR LES BADGES DE STOCK --- */

  .stock-info-badge {
      display: inline-block; /* Assurez-vous que le span est un bloc */
  }

  .stock-remaining-badge {
    position: absolute;
    bottom: 5px;
    right: 5px;
    background-color: rgba(0, 0, 0, 0.6);
    color: white;
    padding: 3px 6px;
    border-radius: 5px;
    font-size: 0.75em;
    z-index: 10;
  }

  .out-of-stock-badge {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: transparent;
    color: #e6e6e6;
    padding: 10px 20px;
    font-size: 1.2em;
    font-weight: bold;
    text-transform: uppercase;
    z-index: 10;
    border-radius: 5px;
  }

  .product.out-of-stock .product-media img {
    filter: grayscale(70%);
  }

  /* Styles pour le tag Nouveauté */
  .new-tag {
    background-color: #ff5722;
    color: white;
    font-weight: bold;
    font-size: 0.75em;
    padding: 4px 8px;
    border-radius: 4px;
    position: absolute;
    top: 15px;
    right: 10px;
    z-index: 10;
  }

  /* Footer */
  footer{
    margin-top:28px;
    background:var(--card-bg);
    padding:18px 12px;
    text-align:center;
    border-top:1px solid rgba(0,0,0,0.04);
  }
  .socials{ display:inline-flex; gap:12px; align-items:center; }
  .socials a img{ width:28px; height:28px; display:inline-block; border: none; /* S'assurer qu'il n'y a pas de bordure par défaut */ }
  .copyright{ margin-top:10px; color:#666; font-size:0.9rem; }

  /* Styles pour le slider d'images */
  #image-slider {
      position: relative;
      width: 100%;
      margin-top: 20px;
      overflow: hidden;
  }
  .slider-container {
      width: 100%;
      overflow: hidden;
  }
  .slider-track {
      display: flex;
      transition: transform 0.5s ease-in-out;
  }
  .slider-track img {
      width: 100%;
      height: 400px;
      object-fit: cover;
      flex-shrink: 0;
      border: none; /* S'assurer qu'il n'y a pas de bordure par défaut */
  }
  .slider-dots-container {
      display: flex;
      justify-content: center;
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      gap: 10px;
  }
  .slider-dot {
      width: 12px;
      height: 12px;
      background-color: rgba(255, 255, 255, 0.5);
      border-radius: 50%;
      cursor: pointer;
      transition: background-color 0.3s ease;
      border: 2px solid white;
  }
  .slider-dot.active {
      background-color: white;
  }

  /* --- STYLES DU MINI-SLIDER --- */
  .mini-slider {
      position: relative;
      overflow: hidden;
      border-radius: 8px;
      display: block;
      width: 100%;
  }

  .mini-slider-track {
      display: flex;
      width: 100%;
      transition: transform 0.4s ease-in-out;
  }

  .product-image-slide {
      width: 100%;
      flex-shrink: 0;
      object-fit: contain;
      height: auto;
      border-radius: 8px;
      border: none; /* S'assurer qu'il n'y a pas de bordure par défaut */
  }

  /* --- CORRECTION POUR LE DÉCALAGE --- */
  .product .mini-slider-track img {
      margin: 0;
      padding: 0;
  }

  .mini-slider-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.4);
      color: white;
      border: none;
      padding: 8px 12px;
      cursor: pointer;
      font-size: 1.5em;
      font-weight: bold;
      border-radius: 5px;
      z-index: 20;
      opacity: 0;
      transition: opacity 0.3s ease;
  }

  .mini-slider:hover .mini-slider-nav {
      opacity: 1;
  }

  .mini-slider-nav.prev-btn {
      left: 10px;
  }

  .mini-slider-nav.next-btn {
      right: 10px;
  }
</style>
</head>
<body>

 <div id="shipping-banner">
      Expédition gratuite à partir de 30 000 FCFA
 </div>

  <div id="preloader">
    <img src="logo1.jpg" alt="Galerie Nomad" class="preloader-logo">
  </div>

  <button class="search-icon" aria-label="Rechercher">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
  </button>
  <a class="cart-icon" onclick="toggleCart()">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M6 7l1-3h10l1 3"></path>
          <path d="M3 7h18l-1.5 14H4.5L3 7z"></path>
          <path d="M8 10V6a4 4 0 0 1 8 0v4"></path>
      </svg>
      <span id="cart-count" class="cart-count">0</span>
  </a>
  <div id="menu-toggle" onclick="toggleMenu()">
      <span class="menu-bar"></span>
      <span class="menu-bar"></span>
      <span class="menu-bar"></span>
  </div>

  <div id="search-container">
      <input type="text" id="search-input" placeholder="Rechercher un produit...">
      <button id="search-back-button" aria-label="Retour à la page principale">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 12H5"></path>
              <polyline points="12 19 5 12 12 5"></polyline>
          </svg>
      </button>
  </div>
  <div id="search-suggestions"></div>

  <div id="cart-panel">
    <button onclick="toggleCart()" style="position: absolute; top: 10px; right: 10px; border: none; background: none; font-size: 20px; cursor: pointer;">❌</button>
    <h2>Votre panier</h2>
    <ul id="cart-items"></ul>
    <p id="cart-total">Total : 0 FCFA</p>
    <button id="checkout-btn">Commander sur WhatsApp</button>
  </div>

  <header>
    <div style="flex: 1; text-align: center;">
        <img src="logo.PNG" alt="Galerie Nomad"
             style="height: 100px; width: auto; object-fit: contain;">
    </div>
    <nav aria-label="menu">
        <a href="#about">l'élégance</a>
        <a href="#creations">à travers</a>
        <a href="#contact">le temps</a>
    </nav>
  </header>

  <div id="promo-banner">
      Fin des soldes dans : <span id="countdown"></span>
  </div>

  <section class="hero" id="intro">
    <div class="hero-text">
      <p style="margin-top:12px;"><a class="cta" href="#creations">Découvrez nos collections</a></p>
    </div>
    <div class="hero-img">
      <img src="Man1.jpg" alt="Bracelet Marin — Galerie Nomad">
    </div>
 </section>

  <section id="intro">
    <h2 class="tagline">L'art des bracelets uniques</h2>
    <p class="tagline">Forgés avec passion et caractère, nos bracelets et tours de cou allient élégance , résistance et identité.</p>
  </section>

  <main>
    <p class="tagline">Bracelets premium en acier inoxydable, or pur et argent 925</p>

    <section class="collection" id="chaines-inox">
        <h2>Chaînes • Acier inoxydable</h2>
        <span class="slide-indicator right" aria-label="Faire glisser à droite">→</span>
        <span class="slide-indicator left" aria-label="Faire glisser à gauche">←</span>
        <div class="collection-slider" id="slider-chaines-inox">
            <article class="product" data-name="Chaîne Mercure 2" data-price="8000" data-stock="0">
                <div class="product-media mini-slider">
                    <div class="mini-slider-track">
                        <img src="Cha3.jpg" alt="Chaîne Mercure 2 - vue 1" class="product-image-slide">
                        <img src="Cha3_2.jpg" alt="Chaîne Mercure 2 - vue 2" class="product-image-slide">
                        <img src="Cha3_3.jpg" alt="Chaîne Mercure 2 - vue 3" class="product-image-slide">
                    </div>
                    <button class="mini-slider-nav prev-btn" data-direction="prev">‹</button>
                    <button class="mini-slider-nav next-btn" data-direction="next">›</button>
                    <span class="stock-info-badge"></span>
                </div>
                <div class="title">Chaîne Mercure 2</div>
                <p class="desc">Tour de cou avec pendentif argenté fin vieilli</p>
                <div class="material">Acier inoxydable + argenté fin vieilli</div>
                <div class="price">8 000 FCFA</div>
                <div class="actions">
                  <button class="heart" aria-label="Like">♡</button>
                  <button class="add-to-cart-btn" aria-label="Ajouter Chaîne Mercure 2 au panier">Ajouter au panier</button>
                </div>
            </article>
            <article class="product" data-name="Chaîne Mercure 1" data-price="8000" data-stock="0">
                <div class="product-media">
                    <img src="Cha2.jpg" alt="Chaîne Mercure 1" class="product-image">
                    <span class="stock-info-badge"></span>
                </div>
                <div class="title">Chaîne Mercure 1</div>
                <p class="desc">Tour de cou avec pendentif croix</p>
                <div class="material">Acier inoxydable</div>
                <div class="price">8 000 FCFA</div>
                <div class="actions">
                  <button class="heart" aria-label="Like">♡</button>
                  <button class="add-to-cart-btn" aria-label="Ajouter Chaîne Mercure 1 au panier">Ajouter au panier</button>
                </div>
            </article>
            </div>
    </section>

    <section class="collection" id="chaines-precieux">
        <h2>Chaînes • Métaux précieux</h2>
        <span class="slide-indicator right" aria-label="Faire glisser à droite">→</span>
        <span class="slide-indicator left" aria-label="Faire glisser à gauche">←</span>
        <div class="collection-slider" id="slider-chaines-precieux">
            <article class="product" data-name="Chaîne Warend 1" data-price="14000" data-stock="5">
                <div class="product-media mini-slider">
                    <div class="mini-slider-track">
                        <img src="Cha1.jpg" alt="Chaîne Warend 1 - vue 1" class="product-image-slide">
                        <img src="Cha1_2.jpg" alt="Chaîne Warend 1 - vue 2" class="product-image-slide">
                        <img src="Cha1_3.jpg" alt="Chaîne Warend 1 - vue 3" class="product-image-slide">
                    </div>
                    <button class="mini-slider-nav prev-btn" data-direction="prev">‹</button>
                    <button class="mini-slider-nav next-btn" data-direction="next">›</button>
                    <div class="new-tag">Nouveauté</div>
                    <span class="stock-info-badge"></span>
                </div>
                <div class="title">Chaîne Warend 1</div>
                <p class="desc">Tour de cou Maille forçat alternée, pendentif ancre</p>
                <div class="material">Argent</div>
                <span style="text-decoration: line-through; color: red;">18 000 FCFA</span>
                <div class="price">14 000 FCFA</div>
                <div class="actions">
                  <button class="heart" aria-label="Like">♡</button>
                  <button class="add-to-cart-btn" aria-label="Ajouter Chaîne Warend 1 au panier">Ajouter au panier</button>
                </div>
            </article>
        </div>
    </section>

  </main>

  <footer>
    <div class="socials">
      <a href="https://www.instagram.com/votre_profil/" target="_blank">
        <img src="insta.svg" alt="Instagram">
      </a>
      <a href="https://wa.me/237699999999" target="_blank">
        <img src="whatsapp.svg" alt="WhatsApp">
      </a>
    </div>
    <div class="copyright">
      &copy; 2023 Galerie Nomad. Tous droits réservés.
    </div>
  </footer>

  <script>
    // Data de base des produits pour la recherche et le panier
    const productsData = [
        { name: "Chaîne Mercure 2", price: 8000, stock: 0, images: ["Cha3.jpg", "Cha3_2.jpg", "Cha3_3.jpg"] },
        { name: "Chaîne Mercure 1", price: 8000, stock: 0, images: ["Cha2.jpg"] },
        { name: "Chaîne Warend 1", price: 14000, stock: 5, images: ["Cha1.jpg", "Cha1_2.jpg", "Cha1_3.jpg"] },
    ];

    // Panier
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let likes = JSON.parse(localStorage.getItem('likes')) || [];

    function updateCartUI() {
        const cartItemsElement = document.getElementById('cart-items');
        const cartCountElement = document.getElementById('cart-count');
        const cartTotalElement = document.getElementById('cart-total');
        cartItemsElement.innerHTML = '';
        let total = 0;

        cart.forEach(item => {
            const li = document.createElement('li');
            li.innerHTML = `
                <span>${item.name} (${item.quantity}) - ${item.price * item.quantity} FCFA</span>
                <div class="cart-item-controls">
                    <button onclick="changeQuantity('${item.name}', -1)">-</button>
                    <button onclick="changeQuantity('${item.name}', 1)">+</button>
                    <button class="remove-btn" onclick="removeFromCart('${item.name}')">❌</button>
                </div>
            `;
            cartItemsElement.appendChild(li);
            total += item.price * item.quantity;
        });

        cartTotalElement.textContent = `Total : ${total} FCFA`;
        cartCountElement.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
        localStorage.setItem('cart', JSON.stringify(cart));
    }

    function addToCart(productName) {
        const product = productsData.find(p => p.name === productName);
        const existingItem = cart.find(item => item.name === productName);
        if (product.stock > 0 && existingItem && existingItem.quantity < product.stock) {
            existingItem.quantity++;
        } else if (product.stock > 0 && !existingItem) {
            cart.push({ name: productName, price: product.price, quantity: 1 });
        } else if (product.stock === 0) {
            alert("Ce produit est actuellement en rupture de stock.");
        }
        updateCartUI();
    }

    function removeFromCart(productName) {
        cart = cart.filter(item => item.name !== productName);
        updateCartUI();
    }

    function changeQuantity(productName, delta) {
        const product = productsData.find(p => p.name === productName);
        const item = cart.find(i => i.name === productName);
        if (item) {
            if (delta > 0 && item.quantity < product.stock) {
                item.quantity += delta;
            } else if (delta < 0 && item.quantity > 1) {
                item.quantity += delta;
            } else if (delta < 0 && item.quantity === 1) {
                removeFromCart(productName);
                return;
            }
        }
        updateCartUI();
    }

    function toggleCart() {
        document.getElementById('cart-panel').classList.toggle('open');
    }

    // Gère le système de like
    function toggleLike(productName, button) {
        const index = likes.indexOf(productName);
        if (index > -1) {
            likes.splice(index, 1);
            button.classList.remove('liked');
        } else {
            likes.push(productName);
            button.classList.add('liked');
        }
        localStorage.setItem('likes', JSON.stringify(likes));
    }

    // Synchronisation de l'affichage des likes
    function syncLikes() {
        document.querySelectorAll('.heart').forEach(button => {
            const product = button.closest('.product').dataset.name;
            if (likes.includes(product)) {
                button.classList.add('liked');
            }
        });
    }

    // Gestion du décompte du temps pour la promo
    function updateCountdown() {
        const promoDate = new Date();
        promoDate.setHours(promoDate.getHours() + 2);
        promoDate.setMinutes(promoDate.getMinutes() + 15);
        promoDate.setSeconds(promoDate.getSeconds() + 30);
        const countdownElement = document.getElementById('countdown');

        const interval = setInterval(() => {
            const now = new Date().getTime();
            const distance = promoDate.getTime() - now;
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            countdownElement.textContent = `${hours}h ${minutes}m ${seconds}s`;

            if (distance < 0) {
                clearInterval(interval);
                countdownElement.textContent = "Expiré!";
            }
        }, 1000);
    }

    // Préchargeur
    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('preloader').classList.add('hidden');
      }, 500); // Règle le temps d'affichage du préchargeur
    });

    // Fonction de recherche
    function setupSearch() {
        const searchInput = document.getElementById('search-input');
        const searchSuggestions = document.getElementById('search-suggestions');
        const searchBackButton = document.getElementById('search-back-button');
        const mainContent = document.querySelector('main');
        const body = document.body;

        const showSuggestions = (items) => {
            searchSuggestions.innerHTML = '';
            if (items.length > 0) {
                items.forEach(item => {
                    const div = document.createElement('div');
                    div.classList.add('suggestion-item');
                    div.textContent = item.name;
                    div.addEventListener('click', () => {
                        window.location.href = '#' + item.name.toLowerCase().replace(/ /g, '-');
                        searchInput.value = '';
                        searchSuggestions.classList.remove('visible');
                    });
                    searchSuggestions.appendChild(div);
                });
                searchSuggestions.classList.add('visible');
            } else {
                searchSuggestions.classList.remove('visible');
            }
        };

        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            if (query.length > 1) {
                const filteredProducts = productsData.filter(p => p.name.toLowerCase().includes(query));
                showSuggestions(filteredProducts);
            } else {
                searchSuggestions.classList.remove('visible');
            }
        });

        document.querySelector('.search-icon').addEventListener('click', () => {
            document.getElementById('search-container').classList.add('visible');
            searchInput.focus();
            searchBackButton.style.display = 'block';
            mainContent.style.filter = 'blur(5px)';
            body.style.overflow = 'hidden';
        });

        searchBackButton.addEventListener('click', () => {
            document.getElementById('search-container').classList.remove('visible');
            searchSuggestions.classList.remove('visible');
            searchInput.value = '';
            searchBackButton.style.display = 'none';
            mainContent.style.filter = 'none';
            body.style.overflow = 'auto';
        });
    }

    // Gestion du menu hamburger
    function toggleMenu() {
      const nav = document.querySelector('nav[aria-label="menu"]');
      nav.classList.toggle('active');
    }

    // Gestion des mini-sliders
    function setupMiniSliders() {
        document.querySelectorAll('.mini-slider').forEach(sliderContainer => {
            const track = sliderContainer.querySelector('.mini-slider-track');
            const images = track.querySelectorAll('img');
            let currentIndex = 0;

            function updateSlider() {
                track.style.transform = `translateX(-${currentIndex * 100}%)`;
            }

            sliderContainer.querySelector('.next-btn').addEventListener('click', () => {
                if (currentIndex < images.length - 1) {
                    currentIndex++;
                } else {
                    currentIndex = 0; // Retour au début
                }
                updateSlider();
            });

            sliderContainer.querySelector('.prev-btn').addEventListener('click', () => {
                if (currentIndex > 0) {
                    currentIndex--;
                } else {
                    currentIndex = images.length - 1; // Aller à la fin
                }
                updateSlider();
            });
        });
    }

    // Mettre à jour les badges de stock
    function updateStockBadges() {
        document.querySelectorAll('.product').forEach(productElement => {
            const productName = productElement.dataset.name;
            const product = productsData.find(p => p.name === productName);
            const badgeContainer = productElement.querySelector('.stock-info-badge');
            
            if (product && product.stock === 0) {
                productElement.classList.add('out-of-stock');
                badgeContainer.innerHTML = `<span class="out-of-stock-badge">Rupture de stock</span>`;
                productElement.querySelector('.add-to-cart-btn').disabled = true;
                productElement.querySelector('.add-to-cart-btn').textContent = "Indisponible";
            } else if (product && product.stock > 0 && product.stock <= 5) {
                badgeContainer.innerHTML = `<span class="stock-remaining-badge">${product.stock} restants</span>`;
            } else {
                badgeContainer.innerHTML = '';
            }
        });
    }

    // NOUVEAU: Fonction pour gérer les flèches de slider dynamiques
    function setupDynamicSliderArrows() {
        document.querySelectorAll('.collection').forEach(collection => {
            const slider = collection.querySelector('.collection-slider');
            const rightArrow = collection.querySelector('.slide-indicator.right');
            const leftArrow = collection.querySelector('.slide-indicator.left');

            function updateArrowVisibility() {
                const hasMoreLeft = slider.scrollLeft > 0;
                const hasMoreRight = slider.scrollWidth > slider.clientWidth + slider.scrollLeft + 1;

                if (hasMoreLeft) {
                    collection.classList.add('has-more-left');
                } else {
                    collection.classList.remove('has-more-left');
                }

                if (hasMoreRight) {
                    collection.classList.add('has-more-right');
                } else {
                    collection.classList.remove('has-more-right');
                }
            }

            slider.addEventListener('scroll', updateArrowVisibility);
            window.addEventListener('resize', updateArrowVisibility);

            // Appel initial
            updateArrowVisibility();
        });
    }

    // Événements
    document.addEventListener('DOMContentLoaded', () => {
        updateCartUI();
        syncLikes();
        updateCountdown();
        setupSearch();
        updateStockBadges();
        setupMiniSliders();
        setupDynamicSliderArrows();

        document.querySelectorAll('.add-to-cart-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                const productName = e.target.closest('.product').dataset.name;
                addToCart(productName);
            });
        });

        document.querySelectorAll('.heart').forEach(button => {
            button.addEventListener('click', (e) => {
                const productName = e.target.closest('.product').dataset.name;
                toggleLike(productName, e.target);
            });
        });
    });

  </script>
</body>
</html>
